<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>pomerol: mpi_dispatcher/mpi_dispatcher.hpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">pomerol
   &#160;<span id="projectnumber">2.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_7df34cd3e49c885ea4ab5d300b9866b3.html">mpi_dispatcher</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">mpi_dispatcher.hpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="mpi__dispatcher_8hpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">// This file is part of pomerol, an exact diagonalization library aimed at</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// solving condensed matter models of interacting fermions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// Copyright (C) 2016-2022 A. Antipov, I. Krivenko and contributors</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">// This Source Code Form is subject to the terms of the Mozilla Public</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">// License, v. 2.0. If a copy of the MPL was not distributed with this</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// file, You can obtain one at http://mozilla.org/MPL/2.0/.</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160; </div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160; </div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#ifndef POMEROL_INCLUDE_MPI_DISPATCHER_MPI_DISPATCHER_HPP</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#define POMEROL_INCLUDE_MPI_DISPATCHER_MPI_DISPATCHER_HPP</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160; </div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &lt;mpi.h&gt;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160; </div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &lt;cstddef&gt;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &lt;map&gt;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &lt;stack&gt;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &lt;vector&gt;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160; </div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacep_m_p_i.html">pMPI</a> {</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160; </div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160; </div>
<div class="line"><a name="l00032"></a><span class="lineno"><a class="line" href="group___m_p_i.html#gaa4ad5723dbafb624eeec890503beb1a9">   32</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="group___m_p_i.html#gaa4ad5723dbafb624eeec890503beb1a9">WorkerTag</a> : <span class="keywordtype">int</span> {</div>
<div class="line"><a name="l00033"></a><span class="lineno"><a class="line" href="group___m_p_i.html#ggaa4ad5723dbafb624eeec890503beb1a9a439816d558cb93982452de55408a9e14">   33</a></span>&#160;    <a class="code" href="group___m_p_i.html#ggaa4ad5723dbafb624eeec890503beb1a9a439816d558cb93982452de55408a9e14">Pending</a>, </div>
<div class="line"><a name="l00034"></a><span class="lineno"><a class="line" href="group___m_p_i.html#ggaa4ad5723dbafb624eeec890503beb1a9ae94820964670b0adc3f5f51e91ed35a8">   34</a></span>&#160;    <a class="code" href="group___m_p_i.html#ggaa4ad5723dbafb624eeec890503beb1a9ae94820964670b0adc3f5f51e91ed35a8">Work</a>,    </div>
<div class="line"><a name="l00035"></a><span class="lineno"><a class="line" href="group___m_p_i.html#ggaa4ad5723dbafb624eeec890503beb1a9aeec3b2aabe0883b6eaaaffe4b14e8d88">   35</a></span>&#160;    <a class="code" href="group___m_p_i.html#ggaa4ad5723dbafb624eeec890503beb1a9aeec3b2aabe0883b6eaaaffe4b14e8d88">Finish</a>   </div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;};</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160; </div>
<div class="line"><a name="l00039"></a><span class="lineno"><a class="line" href="group___m_p_i.html#ga6836ecd468e5454fe2f252ef13971e6f">   39</a></span>&#160;<span class="keyword">using</span> <a class="code" href="group___m_p_i.html#ga6836ecd468e5454fe2f252ef13971e6f">JobId</a> = int;</div>
<div class="line"><a name="l00041"></a><span class="lineno"><a class="line" href="group___m_p_i.html#ga9e6aaf46e73e0b90519aa473e9f61d15">   41</a></span>&#160;<span class="keyword">using</span> <a class="code" href="group___m_p_i.html#ga9e6aaf46e73e0b90519aa473e9f61d15">WorkerId</a> = int;</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160; </div>
<div class="line"><a name="l00044"></a><span class="lineno"><a class="line" href="structp_m_p_i_1_1_m_p_i_worker.html">   44</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structp_m_p_i_1_1_m_p_i_worker.html">MPIWorker</a> {</div>
<div class="line"><a name="l00046"></a><span class="lineno"><a class="line" href="structp_m_p_i_1_1_m_p_i_worker.html#a67c6cac43af8526af2c0a4a54c236c66">   46</a></span>&#160;    MPI_Comm <a class="code" href="structp_m_p_i_1_1_m_p_i_worker.html#a67c6cac43af8526af2c0a4a54c236c66">Comm</a>;</div>
<div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="structp_m_p_i_1_1_m_p_i_worker.html#a251abb6befb4c3898f0a65d9609749ab">   48</a></span>&#160;    <a class="code" href="group___m_p_i.html#ga9e6aaf46e73e0b90519aa473e9f61d15">WorkerId</a> <span class="keyword">const</span> <a class="code" href="structp_m_p_i_1_1_m_p_i_worker.html#a251abb6befb4c3898f0a65d9609749ab">id</a>;</div>
<div class="line"><a name="l00050"></a><span class="lineno"><a class="line" href="structp_m_p_i_1_1_m_p_i_worker.html#a690acf22f92dd194f8d53260c3849edf">   50</a></span>&#160;    <span class="keywordtype">int</span> <span class="keyword">const</span> <a class="code" href="structp_m_p_i_1_1_m_p_i_worker.html#a690acf22f92dd194f8d53260c3849edf">boss</a>;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160; </div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <a class="code" href="structp_m_p_i_1_1_m_p_i_worker.html#a78cff3a4f34b6528f1d454decff499fa">MPIWorker</a>(MPI_Comm <span class="keyword">const</span>&amp; <a class="code" href="structp_m_p_i_1_1_m_p_i_worker.html#a67c6cac43af8526af2c0a4a54c236c66">Comm</a>, <span class="keywordtype">int</span> Boss);</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="structp_m_p_i_1_1_m_p_i_worker.html#a0067f26800be149dafe3eefcdaa32609">receive_order</a>();</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="structp_m_p_i_1_1_m_p_i_worker.html#afb6d080238809d74757c9a4e05b083ef">report_job_done</a>();</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="structp_m_p_i_1_1_m_p_i_worker.html#ada0e1a88e5a15620f216b2d89956ec45">is_finished</a>();</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="structp_m_p_i_1_1_m_p_i_worker.html#aaa0f84213ab09090dbf3a01d1b1b61da">is_working</a>();</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160; </div>
<div class="line"><a name="l00066"></a><span class="lineno"><a class="line" href="structp_m_p_i_1_1_m_p_i_worker.html#ae93757e40941191062348809d7006507">   66</a></span>&#160;    <a class="code" href="group___m_p_i.html#ga6836ecd468e5454fe2f252ef13971e6f">JobId</a> <a class="code" href="structp_m_p_i_1_1_m_p_i_worker.html#aa3d000fc04911369bc5fd5a419f5a8d2">current_job</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="structp_m_p_i_1_1_m_p_i_worker.html#ae93757e40941191062348809d7006507">current_job_</a>; };</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160; </div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="keyword">protected</span>:</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <a class="code" href="group___m_p_i.html#ga6836ecd468e5454fe2f252ef13971e6f">JobId</a> <a class="code" href="structp_m_p_i_1_1_m_p_i_worker.html#ae93757e40941191062348809d7006507">current_job_</a>;</div>
<div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="structp_m_p_i_1_1_m_p_i_worker.html#a334d31d260ff4031273fb98a86b18a51">   72</a></span>&#160;    MPI_Request <a class="code" href="structp_m_p_i_1_1_m_p_i_worker.html#a334d31d260ff4031273fb98a86b18a51">req</a>;</div>
<div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="structp_m_p_i_1_1_m_p_i_worker.html#a4cdabf8c22c3218dc5eeadca58200ee7">   74</a></span>&#160;    <a class="code" href="group___m_p_i.html#gaa4ad5723dbafb624eeec890503beb1a9">WorkerTag</a> <a class="code" href="structp_m_p_i_1_1_m_p_i_worker.html#a4cdabf8c22c3218dc5eeadca58200ee7">Status</a>;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;};</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160; </div>
<div class="line"><a name="l00078"></a><span class="lineno"><a class="line" href="structp_m_p_i_1_1_m_p_i_master.html">   78</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structp_m_p_i_1_1_m_p_i_master.html">MPIMaster</a> {</div>
<div class="line"><a name="l00080"></a><span class="lineno"><a class="line" href="structp_m_p_i_1_1_m_p_i_master.html#a060c5ed7d06b8ed8a53460472d78754c">   80</a></span>&#160;    MPI_Comm <a class="code" href="structp_m_p_i_1_1_m_p_i_master.html#a060c5ed7d06b8ed8a53460472d78754c">Comm</a>;</div>
<div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="structp_m_p_i_1_1_m_p_i_master.html#a22dc0c097fb7c3bd5da3e8c95ad39b22">   82</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structp_m_p_i_1_1_m_p_i_master.html#a22dc0c097fb7c3bd5da3e8c95ad39b22">Ntasks</a>;</div>
<div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="structp_m_p_i_1_1_m_p_i_master.html#a1621ec8828bc776dc0095409238ed3fe">   84</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structp_m_p_i_1_1_m_p_i_master.html#a1621ec8828bc776dc0095409238ed3fe">Nprocs</a>;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160; </div>
<div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="structp_m_p_i_1_1_m_p_i_master.html#a88aba92e02697d9c4acf47279921b739">   87</a></span>&#160;    std::stack&lt;JobId&gt; <a class="code" href="structp_m_p_i_1_1_m_p_i_master.html#a88aba92e02697d9c4acf47279921b739">JobStack</a>;</div>
<div class="line"><a name="l00089"></a><span class="lineno"><a class="line" href="structp_m_p_i_1_1_m_p_i_master.html#af8d595de5a7eb790159108267f8efa3f">   89</a></span>&#160;    std::stack&lt;WorkerId&gt; <a class="code" href="structp_m_p_i_1_1_m_p_i_master.html#af8d595de5a7eb790159108267f8efa3f">WorkerStack</a>;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160; </div>
<div class="line"><a name="l00092"></a><span class="lineno"><a class="line" href="structp_m_p_i_1_1_m_p_i_master.html#a1fd3214353ebb237ca28802fff3e2695">   92</a></span>&#160;    std::map&lt;JobId, WorkerId&gt; <a class="code" href="structp_m_p_i_1_1_m_p_i_master.html#a1fd3214353ebb237ca28802fff3e2695">DispatchMap</a>;</div>
<div class="line"><a name="l00094"></a><span class="lineno"><a class="line" href="structp_m_p_i_1_1_m_p_i_master.html#aaa3840824a82462bcdda80e3c5a19a2b">   94</a></span>&#160;    std::vector&lt;JobId&gt; <a class="code" href="structp_m_p_i_1_1_m_p_i_master.html#aaa3840824a82462bcdda80e3c5a19a2b">task_numbers</a>;</div>
<div class="line"><a name="l00096"></a><span class="lineno"><a class="line" href="structp_m_p_i_1_1_m_p_i_master.html#aa253f540627703c92c9bd92b8c4967f9">   96</a></span>&#160;    std::vector&lt;WorkerId&gt; <a class="code" href="structp_m_p_i_1_1_m_p_i_master.html#aa253f540627703c92c9bd92b8c4967f9">worker_pool</a>;</div>
<div class="line"><a name="l00098"></a><span class="lineno"><a class="line" href="structp_m_p_i_1_1_m_p_i_master.html#ad0dddb8b825168d234531d9bfa5628c1">   98</a></span>&#160;    std::map&lt;WorkerId, int&gt; <a class="code" href="structp_m_p_i_1_1_m_p_i_master.html#ad0dddb8b825168d234531d9bfa5628c1">WorkerIndices</a>;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160; </div>
<div class="line"><a name="l00101"></a><span class="lineno"><a class="line" href="structp_m_p_i_1_1_m_p_i_master.html#a66816a45ee84e6a318c4bd6f144f498e">  101</a></span>&#160;    std::vector&lt;MPI_Request&gt; <a class="code" href="structp_m_p_i_1_1_m_p_i_master.html#a66816a45ee84e6a318c4bd6f144f498e">wait_statuses</a>;</div>
<div class="line"><a name="l00103"></a><span class="lineno"><a class="line" href="structp_m_p_i_1_1_m_p_i_master.html#a3c1e1498313ea4183511bc202e046472">  103</a></span>&#160;    std::vector&lt;bool&gt; <a class="code" href="structp_m_p_i_1_1_m_p_i_master.html#a3c1e1498313ea4183511bc202e046472">workers_finish</a>;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160; </div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <a class="code" href="structp_m_p_i_1_1_m_p_i_master.html#a7e7174919c404b1fe93d85dfa36cb62d">MPIMaster</a>(MPI_Comm <span class="keyword">const</span>&amp; <a class="code" href="structp_m_p_i_1_1_m_p_i_master.html#a060c5ed7d06b8ed8a53460472d78754c">Comm</a>, std::vector&lt;WorkerId&gt; <a class="code" href="structp_m_p_i_1_1_m_p_i_master.html#aa253f540627703c92c9bd92b8c4967f9">worker_pool</a>, std::vector&lt;JobId&gt; <a class="code" href="structp_m_p_i_1_1_m_p_i_master.html#aaa3840824a82462bcdda80e3c5a19a2b">task_numbers</a>);</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <a class="code" href="structp_m_p_i_1_1_m_p_i_master.html#a7e7174919c404b1fe93d85dfa36cb62d">MPIMaster</a>(MPI_Comm <span class="keyword">const</span>&amp; <a class="code" href="structp_m_p_i_1_1_m_p_i_master.html#a060c5ed7d06b8ed8a53460472d78754c">Comm</a>, std::vector&lt;JobId&gt; <a class="code" href="structp_m_p_i_1_1_m_p_i_master.html#aaa3840824a82462bcdda80e3c5a19a2b">task_numbers</a>, <span class="keywordtype">bool</span> include_boss = <span class="keyword">true</span>);</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <a class="code" href="structp_m_p_i_1_1_m_p_i_master.html#a7e7174919c404b1fe93d85dfa36cb62d">MPIMaster</a>(MPI_Comm <span class="keyword">const</span>&amp; <a class="code" href="structp_m_p_i_1_1_m_p_i_master.html#a060c5ed7d06b8ed8a53460472d78754c">Comm</a>, std::size_t ntasks, <span class="keywordtype">bool</span> include_boss = <span class="keyword">true</span>);</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160; </div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="structp_m_p_i_1_1_m_p_i_master.html#a06fc061c422cda9400b59dccfa6e1288">order_worker</a>(<a class="code" href="group___m_p_i.html#ga9e6aaf46e73e0b90519aa473e9f61d15">WorkerId</a> worker_id, <a class="code" href="group___m_p_i.html#ga6836ecd468e5454fe2f252ef13971e6f">JobId</a> job);</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="structp_m_p_i_1_1_m_p_i_master.html#a0248d08815b99917950248a8ed1118d5">order</a>();</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="structp_m_p_i_1_1_m_p_i_master.html#aa93be329740aa215164a84c4db35fec2">check_workers</a>();</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="structp_m_p_i_1_1_m_p_i_master.html#af80365d3534b14de598df7b85067e7d9">is_finished</a>() <span class="keyword">const</span>;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160; </div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="comment">// Implementation details</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="keywordtype">void</span> fill_stack_();</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;};</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160; </div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160; </div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;} <span class="comment">// namespace pMPI</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160; </div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="preprocessor">#endif // #ifndef POMEROL_INCLUDE_MPI_DISPATCHER_MPI_DISPATCHER_HPP</span></div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="astructp_m_p_i_1_1_m_p_i_worker_html_a0067f26800be149dafe3eefcdaa32609"><div class="ttname"><a href="structp_m_p_i_1_1_m_p_i_worker.html#a0067f26800be149dafe3eefcdaa32609">pMPI::MPIWorker::receive_order</a></div><div class="ttdeci">void receive_order()</div><div class="ttdoc">Check if there is an outstanding order from the master.</div></div>
<div class="ttc" id="astructp_m_p_i_1_1_m_p_i_worker_html_ae93757e40941191062348809d7006507"><div class="ttname"><a href="structp_m_p_i_1_1_m_p_i_worker.html#ae93757e40941191062348809d7006507">pMPI::MPIWorker::current_job_</a></div><div class="ttdeci">JobId current_job_</div><div class="ttdoc">ID of the job currently assigned to this worker.</div><div class="ttdef"><b>Definition:</b> <a href="mpi__dispatcher_8hpp_source.html#l00066">mpi_dispatcher.hpp:66</a></div></div>
<div class="ttc" id="astructp_m_p_i_1_1_m_p_i_master_html_a060c5ed7d06b8ed8a53460472d78754c"><div class="ttname"><a href="structp_m_p_i_1_1_m_p_i_master.html#a060c5ed7d06b8ed8a53460472d78754c">pMPI::MPIMaster::Comm</a></div><div class="ttdeci">MPI_Comm Comm</div><div class="ttdoc">MPI communicator.</div><div class="ttdef"><b>Definition:</b> <a href="mpi__dispatcher_8hpp_source.html#l00080">mpi_dispatcher.hpp:80</a></div></div>
<div class="ttc" id="astructp_m_p_i_1_1_m_p_i_worker_html_a334d31d260ff4031273fb98a86b18a51"><div class="ttname"><a href="structp_m_p_i_1_1_m_p_i_worker.html#a334d31d260ff4031273fb98a86b18a51">pMPI::MPIWorker::req</a></div><div class="ttdeci">MPI_Request req</div><div class="ttdoc">An MPI request handle used for non-blocking communications.</div><div class="ttdef"><b>Definition:</b> <a href="mpi__dispatcher_8hpp_source.html#l00072">mpi_dispatcher.hpp:72</a></div></div>
<div class="ttc" id="astructp_m_p_i_1_1_m_p_i_worker_html_aaa0f84213ab09090dbf3a01d1b1b61da"><div class="ttname"><a href="structp_m_p_i_1_1_m_p_i_worker.html#aaa0f84213ab09090dbf3a01d1b1b61da">pMPI::MPIWorker::is_working</a></div><div class="ttdeci">bool is_working()</div><div class="ttdoc">Is a job being processed by this worker?</div></div>
<div class="ttc" id="astructp_m_p_i_1_1_m_p_i_master_html_aaa3840824a82462bcdda80e3c5a19a2b"><div class="ttname"><a href="structp_m_p_i_1_1_m_p_i_master.html#aaa3840824a82462bcdda80e3c5a19a2b">pMPI::MPIMaster::task_numbers</a></div><div class="ttdeci">std::vector&lt; JobId &gt; task_numbers</div><div class="ttdoc">A list of IDs of all jobs to be completed.</div><div class="ttdef"><b>Definition:</b> <a href="mpi__dispatcher_8hpp_source.html#l00094">mpi_dispatcher.hpp:94</a></div></div>
<div class="ttc" id="astructp_m_p_i_1_1_m_p_i_worker_html_a78cff3a4f34b6528f1d454decff499fa"><div class="ttname"><a href="structp_m_p_i_1_1_m_p_i_worker.html#a78cff3a4f34b6528f1d454decff499fa">pMPI::MPIWorker::MPIWorker</a></div><div class="ttdeci">MPIWorker(MPI_Comm const &amp;Comm, int Boss)</div></div>
<div class="ttc" id="astructp_m_p_i_1_1_m_p_i_master_html_a66816a45ee84e6a318c4bd6f144f498e"><div class="ttname"><a href="structp_m_p_i_1_1_m_p_i_master.html#a66816a45ee84e6a318c4bd6f144f498e">pMPI::MPIMaster::wait_statuses</a></div><div class="ttdeci">std::vector&lt; MPI_Request &gt; wait_statuses</div><div class="ttdoc">MPI request handles used to perform non-blocking communications with the workers.</div><div class="ttdef"><b>Definition:</b> <a href="mpi__dispatcher_8hpp_source.html#l00101">mpi_dispatcher.hpp:101</a></div></div>
<div class="ttc" id="astructp_m_p_i_1_1_m_p_i_master_html_a88aba92e02697d9c4acf47279921b739"><div class="ttname"><a href="structp_m_p_i_1_1_m_p_i_master.html#a88aba92e02697d9c4acf47279921b739">pMPI::MPIMaster::JobStack</a></div><div class="ttdeci">std::stack&lt; JobId &gt; JobStack</div><div class="ttdoc">Stack of the jobs yet to be assigned to a worker.</div><div class="ttdef"><b>Definition:</b> <a href="mpi__dispatcher_8hpp_source.html#l00087">mpi_dispatcher.hpp:87</a></div></div>
<div class="ttc" id="astructp_m_p_i_1_1_m_p_i_master_html_a1621ec8828bc776dc0095409238ed3fe"><div class="ttname"><a href="structp_m_p_i_1_1_m_p_i_master.html#a1621ec8828bc776dc0095409238ed3fe">pMPI::MPIMaster::Nprocs</a></div><div class="ttdeci">int Nprocs</div><div class="ttdoc">Total number of worker processes.</div><div class="ttdef"><b>Definition:</b> <a href="mpi__dispatcher_8hpp_source.html#l00084">mpi_dispatcher.hpp:84</a></div></div>
<div class="ttc" id="astructp_m_p_i_1_1_m_p_i_master_html_af8d595de5a7eb790159108267f8efa3f"><div class="ttname"><a href="structp_m_p_i_1_1_m_p_i_master.html#af8d595de5a7eb790159108267f8efa3f">pMPI::MPIMaster::WorkerStack</a></div><div class="ttdeci">std::stack&lt; WorkerId &gt; WorkerStack</div><div class="ttdoc">Stack of currently pending workers.</div><div class="ttdef"><b>Definition:</b> <a href="mpi__dispatcher_8hpp_source.html#l00089">mpi_dispatcher.hpp:89</a></div></div>
<div class="ttc" id="astructp_m_p_i_1_1_m_p_i_master_html_a22dc0c097fb7c3bd5da3e8c95ad39b22"><div class="ttname"><a href="structp_m_p_i_1_1_m_p_i_master.html#a22dc0c097fb7c3bd5da3e8c95ad39b22">pMPI::MPIMaster::Ntasks</a></div><div class="ttdeci">int Ntasks</div><div class="ttdoc">Total number of jobs.</div><div class="ttdef"><b>Definition:</b> <a href="mpi__dispatcher_8hpp_source.html#l00082">mpi_dispatcher.hpp:82</a></div></div>
<div class="ttc" id="astructp_m_p_i_1_1_m_p_i_worker_html_a690acf22f92dd194f8d53260c3849edf"><div class="ttname"><a href="structp_m_p_i_1_1_m_p_i_worker.html#a690acf22f92dd194f8d53260c3849edf">pMPI::MPIWorker::boss</a></div><div class="ttdeci">const int boss</div><div class="ttdoc">Rank of the master process.</div><div class="ttdef"><b>Definition:</b> <a href="mpi__dispatcher_8hpp_source.html#l00050">mpi_dispatcher.hpp:50</a></div></div>
<div class="ttc" id="astructp_m_p_i_1_1_m_p_i_master_html_ad0dddb8b825168d234531d9bfa5628c1"><div class="ttname"><a href="structp_m_p_i_1_1_m_p_i_master.html#ad0dddb8b825168d234531d9bfa5628c1">pMPI::MPIMaster::WorkerIndices</a></div><div class="ttdeci">std::map&lt; WorkerId, int &gt; WorkerIndices</div><div class="ttdoc">Worker IDs and their serial numbers from the [0; worker_pool.size()[ range.</div><div class="ttdef"><b>Definition:</b> <a href="mpi__dispatcher_8hpp_source.html#l00098">mpi_dispatcher.hpp:98</a></div></div>
<div class="ttc" id="astructp_m_p_i_1_1_m_p_i_master_html_a0248d08815b99917950248a8ed1118d5"><div class="ttname"><a href="structp_m_p_i_1_1_m_p_i_master.html#a0248d08815b99917950248a8ed1118d5">pMPI::MPIMaster::order</a></div><div class="ttdeci">void order()</div><div class="ttdoc">Request the next available worker to perform the next job from the job stack.</div></div>
<div class="ttc" id="astructp_m_p_i_1_1_m_p_i_worker_html_aa3d000fc04911369bc5fd5a419f5a8d2"><div class="ttname"><a href="structp_m_p_i_1_1_m_p_i_worker.html#aa3d000fc04911369bc5fd5a419f5a8d2">pMPI::MPIWorker::current_job</a></div><div class="ttdeci">JobId current_job() const</div><div class="ttdoc">Get the ID of the job currently assigned to this worker.</div><div class="ttdef"><b>Definition:</b> <a href="mpi__dispatcher_8hpp_source.html#l00066">mpi_dispatcher.hpp:66</a></div></div>
<div class="ttc" id="astructp_m_p_i_1_1_m_p_i_worker_html_a67c6cac43af8526af2c0a4a54c236c66"><div class="ttname"><a href="structp_m_p_i_1_1_m_p_i_worker.html#a67c6cac43af8526af2c0a4a54c236c66">pMPI::MPIWorker::Comm</a></div><div class="ttdeci">MPI_Comm Comm</div><div class="ttdoc">MPI communicator.</div><div class="ttdef"><b>Definition:</b> <a href="mpi__dispatcher_8hpp_source.html#l00046">mpi_dispatcher.hpp:46</a></div></div>
<div class="ttc" id="agroup___m_p_i_html_gaa4ad5723dbafb624eeec890503beb1a9"><div class="ttname"><a href="group___m_p_i.html#gaa4ad5723dbafb624eeec890503beb1a9">pMPI::WorkerTag</a></div><div class="ttdeci">WorkerTag</div><div class="ttdoc">MPI message tags used in communications between the master and its workers.</div><div class="ttdef"><b>Definition:</b> <a href="mpi__dispatcher_8hpp_source.html#l00032">mpi_dispatcher.hpp:32</a></div></div>
<div class="ttc" id="agroup___m_p_i_html_ggaa4ad5723dbafb624eeec890503beb1a9aeec3b2aabe0883b6eaaaffe4b14e8d88"><div class="ttname"><a href="group___m_p_i.html#ggaa4ad5723dbafb624eeec890503beb1a9aeec3b2aabe0883b6eaaaffe4b14e8d88">pMPI::Finish</a></div><div class="ttdeci">@ Finish</div><div class="ttdoc">Order a worker to shut down.</div><div class="ttdef"><b>Definition:</b> <a href="mpi__dispatcher_8hpp_source.html#l00035">mpi_dispatcher.hpp:35</a></div></div>
<div class="ttc" id="astructp_m_p_i_1_1_m_p_i_master_html_a3c1e1498313ea4183511bc202e046472"><div class="ttname"><a href="structp_m_p_i_1_1_m_p_i_master.html#a3c1e1498313ea4183511bc202e046472">pMPI::MPIMaster::workers_finish</a></div><div class="ttdeci">std::vector&lt; bool &gt; workers_finish</div><div class="ttdoc">Flags to mark workers that have been shut down.</div><div class="ttdef"><b>Definition:</b> <a href="mpi__dispatcher_8hpp_source.html#l00103">mpi_dispatcher.hpp:103</a></div></div>
<div class="ttc" id="astructp_m_p_i_1_1_m_p_i_worker_html_a251abb6befb4c3898f0a65d9609749ab"><div class="ttname"><a href="structp_m_p_i_1_1_m_p_i_worker.html#a251abb6befb4c3898f0a65d9609749ab">pMPI::MPIWorker::id</a></div><div class="ttdeci">const WorkerId id</div><div class="ttdoc">Worker ID of this process.</div><div class="ttdef"><b>Definition:</b> <a href="mpi__dispatcher_8hpp_source.html#l00048">mpi_dispatcher.hpp:48</a></div></div>
<div class="ttc" id="astructp_m_p_i_1_1_m_p_i_master_html"><div class="ttname"><a href="structp_m_p_i_1_1_m_p_i_master.html">pMPI::MPIMaster</a></div><div class="ttdoc">Abstraction of an MPI master process.</div><div class="ttdef"><b>Definition:</b> <a href="mpi__dispatcher_8hpp_source.html#l00078">mpi_dispatcher.hpp:78</a></div></div>
<div class="ttc" id="astructp_m_p_i_1_1_m_p_i_master_html_af80365d3534b14de598df7b85067e7d9"><div class="ttname"><a href="structp_m_p_i_1_1_m_p_i_master.html#af80365d3534b14de598df7b85067e7d9">pMPI::MPIMaster::is_finished</a></div><div class="ttdeci">bool is_finished() const</div><div class="ttdoc">Have all the workers been shut down?</div></div>
<div class="ttc" id="astructp_m_p_i_1_1_m_p_i_worker_html_ada0e1a88e5a15620f216b2d89956ec45"><div class="ttname"><a href="structp_m_p_i_1_1_m_p_i_worker.html#ada0e1a88e5a15620f216b2d89956ec45">pMPI::MPIWorker::is_finished</a></div><div class="ttdeci">bool is_finished()</div><div class="ttdoc">Has this worker process finished execution.</div></div>
<div class="ttc" id="agroup___m_p_i_html_ggaa4ad5723dbafb624eeec890503beb1a9ae94820964670b0adc3f5f51e91ed35a8"><div class="ttname"><a href="group___m_p_i.html#ggaa4ad5723dbafb624eeec890503beb1a9ae94820964670b0adc3f5f51e91ed35a8">pMPI::Work</a></div><div class="ttdeci">@ Work</div><div class="ttdoc">Request a worker to do a job.</div><div class="ttdef"><b>Definition:</b> <a href="mpi__dispatcher_8hpp_source.html#l00034">mpi_dispatcher.hpp:34</a></div></div>
<div class="ttc" id="agroup___m_p_i_html_ggaa4ad5723dbafb624eeec890503beb1a9a439816d558cb93982452de55408a9e14"><div class="ttname"><a href="group___m_p_i.html#ggaa4ad5723dbafb624eeec890503beb1a9a439816d558cb93982452de55408a9e14">pMPI::Pending</a></div><div class="ttdeci">@ Pending</div><div class="ttdoc">A worker is waiting for a new job.</div><div class="ttdef"><b>Definition:</b> <a href="mpi__dispatcher_8hpp_source.html#l00033">mpi_dispatcher.hpp:33</a></div></div>
<div class="ttc" id="agroup___m_p_i_html_ga9e6aaf46e73e0b90519aa473e9f61d15"><div class="ttname"><a href="group___m_p_i.html#ga9e6aaf46e73e0b90519aa473e9f61d15">pMPI::WorkerId</a></div><div class="ttdeci">int WorkerId</div><div class="ttdoc">ID of a worker process.</div><div class="ttdef"><b>Definition:</b> <a href="mpi__dispatcher_8hpp_source.html#l00041">mpi_dispatcher.hpp:41</a></div></div>
<div class="ttc" id="astructp_m_p_i_1_1_m_p_i_master_html_a06fc061c422cda9400b59dccfa6e1288"><div class="ttname"><a href="structp_m_p_i_1_1_m_p_i_master.html#a06fc061c422cda9400b59dccfa6e1288">pMPI::MPIMaster::order_worker</a></div><div class="ttdeci">void order_worker(WorkerId worker_id, JobId job)</div></div>
<div class="ttc" id="astructp_m_p_i_1_1_m_p_i_master_html_aa253f540627703c92c9bd92b8c4967f9"><div class="ttname"><a href="structp_m_p_i_1_1_m_p_i_master.html#aa253f540627703c92c9bd92b8c4967f9">pMPI::MPIMaster::worker_pool</a></div><div class="ttdeci">std::vector&lt; WorkerId &gt; worker_pool</div><div class="ttdoc">A list of IDs of all worker processes.</div><div class="ttdef"><b>Definition:</b> <a href="mpi__dispatcher_8hpp_source.html#l00096">mpi_dispatcher.hpp:96</a></div></div>
<div class="ttc" id="astructp_m_p_i_1_1_m_p_i_master_html_aa93be329740aa215164a84c4db35fec2"><div class="ttname"><a href="structp_m_p_i_1_1_m_p_i_master.html#aa93be329740aa215164a84c4db35fec2">pMPI::MPIMaster::check_workers</a></div><div class="ttdeci">void check_workers()</div><div class="ttdoc">Check which workers have become available and which have been shut down.</div></div>
<div class="ttc" id="astructp_m_p_i_1_1_m_p_i_worker_html_a4cdabf8c22c3218dc5eeadca58200ee7"><div class="ttname"><a href="structp_m_p_i_1_1_m_p_i_worker.html#a4cdabf8c22c3218dc5eeadca58200ee7">pMPI::MPIWorker::Status</a></div><div class="ttdeci">WorkerTag Status</div><div class="ttdoc">Current state of this worker.</div><div class="ttdef"><b>Definition:</b> <a href="mpi__dispatcher_8hpp_source.html#l00074">mpi_dispatcher.hpp:74</a></div></div>
<div class="ttc" id="astructp_m_p_i_1_1_m_p_i_worker_html"><div class="ttname"><a href="structp_m_p_i_1_1_m_p_i_worker.html">pMPI::MPIWorker</a></div><div class="ttdoc">Abstraction of an MPI worker process.</div><div class="ttdef"><b>Definition:</b> <a href="mpi__dispatcher_8hpp_source.html#l00044">mpi_dispatcher.hpp:44</a></div></div>
<div class="ttc" id="astructp_m_p_i_1_1_m_p_i_master_html_a7e7174919c404b1fe93d85dfa36cb62d"><div class="ttname"><a href="structp_m_p_i_1_1_m_p_i_master.html#a7e7174919c404b1fe93d85dfa36cb62d">pMPI::MPIMaster::MPIMaster</a></div><div class="ttdeci">MPIMaster(MPI_Comm const &amp;Comm, std::vector&lt; WorkerId &gt; worker_pool, std::vector&lt; JobId &gt; task_numbers)</div></div>
<div class="ttc" id="astructp_m_p_i_1_1_m_p_i_master_html_a1fd3214353ebb237ca28802fff3e2695"><div class="ttname"><a href="structp_m_p_i_1_1_m_p_i_master.html#a1fd3214353ebb237ca28802fff3e2695">pMPI::MPIMaster::DispatchMap</a></div><div class="ttdeci">std::map&lt; JobId, WorkerId &gt; DispatchMap</div><div class="ttdoc">A mapping from job IDs to IDs of the workers assigned to perform the jobs.</div><div class="ttdef"><b>Definition:</b> <a href="mpi__dispatcher_8hpp_source.html#l00092">mpi_dispatcher.hpp:92</a></div></div>
<div class="ttc" id="anamespacep_m_p_i_html"><div class="ttname"><a href="namespacep_m_p_i.html">pMPI</a></div><div class="ttdoc">A bunch of tools used for MPI-parallelization of computations.</div><div class="ttdef"><b>Definition:</b> <a href="mpi__dispatcher_2misc_8hpp_source.html#l00021">misc.hpp:21</a></div></div>
<div class="ttc" id="agroup___m_p_i_html_ga6836ecd468e5454fe2f252ef13971e6f"><div class="ttname"><a href="group___m_p_i.html#ga6836ecd468e5454fe2f252ef13971e6f">pMPI::JobId</a></div><div class="ttdeci">int JobId</div><div class="ttdoc">ID of a job.</div><div class="ttdef"><b>Definition:</b> <a href="mpi__dispatcher_8hpp_source.html#l00039">mpi_dispatcher.hpp:39</a></div></div>
<div class="ttc" id="astructp_m_p_i_1_1_m_p_i_worker_html_afb6d080238809d74757c9a4e05b083ef"><div class="ttname"><a href="structp_m_p_i_1_1_m_p_i_worker.html#afb6d080238809d74757c9a4e05b083ef">pMPI::MPIWorker::report_job_done</a></div><div class="ttdeci">void report_job_done()</div><div class="ttdoc">Notify the master about a job's completion.</div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri May 5 2023 09:59:03 for pomerol by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
